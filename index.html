

<!DOCTYPE html>
<html>
<head>
	<title>Freug board configurator</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" href="custom.css">

	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.css">

</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-sm-6">
<div class="section" id="section1">
<h2>Choix du type de board</h2>

<div class="radio radio-title">
  <label>
    <input type="radio" name="type" id="section1Radios1" value="Freestyle" checked>
    <h3>Board Freestyle</h3>
    <p>« Les Boards Freestyle ont été développées pour vous offrir un excellent pop dû à un scoop supérieur de 5mm et un flex adapté. Vous aurez le choix dans une gamme d’ailerons spécifiques freestyle qui vous permettront d’avoir  le meilleur compromis entre stabilité à la réception et maniabilité.Chausse possible :)»</p>
  </label>
</div>
<div class="radio radio-title">
  <label>
    <input type="radio" name="type" id="section1Radios2" value="Freeride">

    <h3>Board Freeride</h3>
    <p>« les Boards Freeride ont été développées pour vous offrir le meilleur confort possible dans toutes les conditions. Leur flex, l’outline et le scoop ont été imaginés pour vous apporter une excellente remontée au vent. »</p>
  </label>
</div>
</div>

<div class="section" id="section2freeride">
<h2>Choix de la taille</h2>
<div class="radio radio-title">
  <label>
    <input type="radio" name="taillefreeride" id="section2freerideRadios1" value="129X39cm" checked>

    <h3>129X39cm</h3>
    <p>« Cette taille à été développée spécialement pour les petits gabarits (poids de: 45kg  à 55kg). »</p>
  </label>
</div>
<div class="radio radio-title">
  <label>
    <input type="radio" name="taillefreeride" id="section2freerideRadios2" value="133X41cm">

    <h3>133X41cm</h3>
    <p>« Cette taille à été développée pour le gabarit moyen elle correspondra aux meilleurs compromis entre toutes les boards freeride du marché (poids de: 50kg à 80kg). »</p>
  </label>
</div>
<div class="radio radio-title">
  <label>
    <input type="radio" name="taillefreeride" id="section2freerideRadios3" value="138X44cm">

    <h3>138X44cm</h3>
    <p>« Cette taille à été développée pour le lightwind. Sa surface vous permettra de partir dès le début du planning  ou planche freeride classique (pour un poids > 80kg). »</p>
  </label>
</div>


</div>
<div class="section" id="section2freestyle">
<h2>Choix de la taille</h2>
<div class="radio radio-title">
  <label>
    <input type="radio" name="taillefreestyle" id="section2freestyleRadios1" value="135X42cm" checked>
    <h3>135X42cm</h3>
    <p>« Nous avons choisi de vous proposer une seul taille pour la board freestyle pour vous faciliter dans votre choix. la taille de 135X42 vous offrira les meilleurs compromis quelque soit votre morphologie. »</p>
  </label>
</div>
</div>

<div class="section" id="section3">
<h2>Choix de la composition</h2>
<p>Toutes les boards freug’s kiteboarding ont un noyau 100% bois mais nous avons besoin d’ajouter de la fibre de verre ou de carbone ainsi que de la résine pour la solidité et la réactivité de la planche à la flexion.
</p>
<div class="radio radio-title">
  <label>
    <input type="radio" name="composition" id="section3Radios2" value="Fibre de verre" checked>
    <h3>Fibre de verre</h3>
    <p>« La fibre de verre vous permettra d’avoir une stratification transparente et permet de voir le noyeau 100% bois. Elle apporte plus de souplesse que la fibre de carbone elle est conseillée pour les boards freeride.»</p>
  </label>
</div>
<div class="radio radio-title">
  <label>
    <input type="radio" name="composition" id="section3Radios1" value="Carbone">
    <h3>Carbone</h3>
    <p>« En plus de son design moderne et sobre, le carbone vous apportera moins de flex que la fibre de verre.<br>
	L’avantage: plus de pop (conseillée sur les boards freestyle). <br>
	L’inconvénient : moins agréable dans le clapot que la fibre de verre. »</p>
  </label>
</div>
</div>

<div class="section" id="section4">
	<h2>Choix de la couleur</h2>
	<h3>Couleur principale :</h3>
	<input type='text' id="colorpicker1" />
	<h3>Couleur secondaire :</h3>
	<input type='text' id="colorpicker2" />
</div>

<div class="section" id="section5">
	<h2>Choix de la finition</h2>
	<p>nous vous laissons le choix de choisir la finition du dessus de la board. En effet toutes nos boards serront livré avec un dessous MAT car ce revêtement est moins sensible aux rayures.</p>
	<div class="radio radio-title">
	  <label>
	    <input type="radio" name="finition" id="section5Radios1" value="Brillante" checked>
		<h2>Brillante</h2>
		<p>Trés girly et apporte une superbe brillance à la couleur.</p>
	  </label>
	</div>
	<div class="radio radio-title">
	  <label>
	    <input type="radio" name="finition" id="section5Radios2" value="Mat">
		<h2>Mat</h2>
		<p>Board moins sensible aux rayures</p>
	  </label>
	</div>

</div>
<div class="section" id="section6freeride">
	<h2>Choix de l'aileron</h2>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreeride" id="section6freerideRadios1" value="ailerons-kitesurf-legend-g10" checked>
	<img src="ailerons/ailerons-kitesurf-legend-g10.jpeg">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreeride" id="section6freerideRadios2" value="ailerons-kitesurf-legend-noir-rose">
	<img src="ailerons/ailerons-kitesurf-legend-noir-rose.jpeg">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreeride" id="section6freerideRadios3" value="ailerons-kitesurf-legend-vert-blanc">
	<img src="ailerons/ailerons-kitesurf-legend-vert-blanc.jpeg">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreeride" id="section6freerideRadios4" value="ailerons-kitesurf-legend">
	<img src="ailerons/ailerons-kitesurf-legend.jpeg">
  </label>
</div>


</div>
<div class="section" id="section6freestyle">
	<h2>Choix de l'aileron</h2>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreestyle" id="section6freestyleRadios1" value="ailerons-wakeboard-kitesurf--mosquito" checked>
	<img src="ailerons/ailerons-wakeboard-kitesurf--mosquito.jpeg" class="img-responsive">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreestyle" id="section6freestyleRadios2" value="ailerons-wakeboard-kitesurf-G10-mosquito">
	<img src="ailerons/ailerons-wakeboard-kitesurf-G10-mosquito.jpeg" class="img-responsive">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreestyle" id="section6freestyleRadios3" value="ailerons-wakeboard-kitesurf-mosquito-noir-rose">
	<img src="ailerons/ailerons-wakeboard-kitesurf-mosquito-noir-rose.jpeg" class="img-responsive">
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="aileronfreestyle" id="section6freestyleRadios4" value="ailerons-wakeboard-kitesurf-mosquito-vert-blanc">
	<img src="ailerons/ailerons-wakeboard-kitesurf-mosquito-vert-blanc.jpeg" class="img-responsive">
  </label>
</div>
</div>

<div class="section" id="section7">
	<h2>Récapitulatif</h2>
	<ul>
		<li>Type : <span id="recapType"></span></li>
		<li>Taille : <span id="recapTaille"></span></li>
		<li>Composition : <span id="recapComposition"></span></li>
		<li>Finition : <span id="recapFinition"></span></li>
		<li>Aileron :</li>
	</ul>
	<img id="recapAileron" src="" class="img-responsive">
</div>
<div class="section" id="section8">
	<h2>Choix de la housse</h2>
	<div class="radio">
	  <label>
	    <input type="radio" name="housse" id="section8Radios1" value="housseBleu">
		<img src="housses/houssebleu.jpeg" class="img-responsive">
	  </label>
	</div>
	<div class="radio">
	  <label>
	    <input type="radio" name="housse" id="section8Radios2" value="housseRose">
		<img src="housses/housserose.jpeg" class="img-responsive">
	  </label>
	</div>
	<div class="radio">
	  <label>
		<input type="radio" name="housse" id="section8Radios3" value="nonHousse" checked>
	    Non merci
	  </label>
	</div>
</div>
<div class="section" id="section9">
	<h2>Paiement</h2>
	<div class="radio">
	  <label>
	    <input type="radio" name="livraison" id="section9Radios1" value="france" checked>
		France (Gratuit)
	  </label>
	</div>
	<div class="radio">
	  <label>
	    <input type="radio" name="livraison" id="section9Radios2" value="europe">
		Europe (+50€)
	  </label>
	</div>
	<div class="radio">
	  <label>
		<input type="radio" name="livraison" id="section9Radios3" value="monde">
	    Monde (+100€)
	  </label>
	</div>

	<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		<input type="hidden" name="cmd" value="_xclick">
		<input type="hidden" name="business" value="olivier.brun@freugskiteboarding.com">
		<input type="hidden" name="lc" value="US">
		<input type="hidden" name="item_name" id="paypalObjectName" value="objectname">
		<input type="hidden" name="amount" id="paypalAmount" value="17.00">
		<input type="hidden" name="currency_code" value="EUR">
		<input type="hidden" name="button_subtype" value="services">
		<input type="hidden" name="no_note" value="0">
		<input type="hidden" name="shipping" id="paypalLivraison" value="0.00">
		<input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest">
		<input type="image" src="https://www.paypalobjects.com/fr_XC/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - la solution de paiement en ligne la plus simple et la plus sécurisée !">
		<img alt="" border="0" src="https://www.paypalobjects.com/fr_XC/i/scr/pixel.gif" width="1" height="1">
	</form>
</div>

	<button class="btn btn-small btn-default" id="precedent">Précedent</button>
	<button class="btn btn-small btn-primary" id="suivant">Suivant</button>
		</div>
		<div class="col-sm-6">
			<object type="image/svg+xml" data="svgs/FREERIDE-BOIS-DESSUS.svg" id="freeride-bois-dessus" class="board-svg" width="100%">
				freeride-bois-dessus
			</object>
			<object type="image/svg+xml" data="svgs/FREERIDE-BOIS-DESSOUS.svg" id="freeride-bois-dessous" class="board-svg" width="100%">
				freeride-bois-dessous
			</object>
			<object type="image/svg+xml" data="svgs/FREERIDE-CARBON-DESSUS.svg" id="freeride-carbon-dessus" class="board-svg" width="100%">
				freeride-carbon-dessus
			</object>
			<object type="image/svg+xml" data="svgs/FREERIDE-CARBON-DESSOUS.svg" id="freeride-carbon-dessous" class="board-svg" width="100%">
				freeride-carbon-dessous
			</object>
			<object type="image/svg+xml" data="svgs/FREESTYLE-BOIS-DESSUS.svg" id="freestyle-bois-dessus" class="board-svg" width="100%">
				freestyle-bois-dessus
			</object>
			<object type="image/svg+xml" data="svgs/FREESTYLE-BOIS-DESSOUS.svg" id="freestyle-bois-dessous" class="board-svg" width="100%">
				freestyle-bois-dessous
			</object>
			<object type="image/svg+xml" data="svgs/FREESTYLE-CARBON-DESSUS.svg" id="freestyle-carbon-dessus" class="board-svg" width="100%">
				freestyle-carbon-dessus
			</object>
			<object type="image/svg+xml" data="svgs/FREESTYLE-CARBON-DESSOUS.svg" id="freestyle-carbon-dessous" class="board-svg" width="100%">
				freestyle-carbon-dessous
			</object>
		</div>
	</div>
</div>




	<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.0/spectrum.min.js"></script>

	<script>
		var board = {
			couleur1: null,
			couleur2: null,
			type: null,
			composition: null,
			taille: null,
			aileron: null,
			housse: null,
			finition: null
		}

		var zones1 = ["ZONE1", "ZONE3", "ZONE5", "ZONE5", "ZONE6", "ZONE7", "ZONE8", "ZONE9", "ZONE10", "ZONE11", "MASK1", "MASK2", "MASK3"];
		var zones2 = ["ZONE2", "ZONE2A", "ZONE2B", "ZONE4"];

		$(function() {
			$("#colorpicker1").spectrum({
			    color: "#f00",
			    move: function(tinycolor) {
			    	console.log("#colorpicker1", tinycolor.toHexString());
			    	board.couleur1 = tinycolor.toHexString()
			    	console.log($(".board-svg")[0].contentDocument);
					$(".board-svg").each(function(index, svgwrapper){
						var svgdoc = svgwrapper.contentDocument;
						$.each(zones1, function(index, zone){
							console.log(zone)
							var svgItem = svgdoc.getElementById(zone);
							if(svgItem){
								svgItem.setAttribute("fill", tinycolor.toHexString());
							}
						});
					});
			    }
			});
			$("#colorpicker2").spectrum({
			    color: "#f00",
			    move: function(tinycolor) {
			    	console.log("#colorpicker2", tinycolor.toHexString());
			    	board.couleur2 = tinycolor.toHexString()
			    	console.log($(".board-svg")[0].contentDocument);
					$(".board-svg").each(function(index, svgwrapper){
						var svgdoc = svgwrapper.contentDocument;
						$.each(zones2, function(index, zone){
							var svgItem = svgdoc.getElementById(zone);
							if(svgItem){
								svgItem.setAttribute("fill", tinycolor.toHexString());
							}
						});
					});
			    }
			});
		});

		var currentStep = "section1";

		var nextStep = function() {
			if(currentStep == "section1") {
				if(board.type == "Freestyle") {
					return "section2freestyle";
				}else{
					return "section2freeride";
				}
			}
			if(currentStep == "section2freestyle" || currentStep == "section2freeride" ) {
				return "section3";
			}
			if(currentStep == "section3") {
				return "section4";
			}
			if(currentStep == "section4") {
				return "section5";
			}
			if(currentStep == "section5") {
				if(board.type == "Freestyle") {
					return "section6freestyle";
				}else{
					return "section6freeride";
				}
			}
			if(currentStep == "section6freestyle" || currentStep == "section6freeride" ) {
				return "section7";
			}
			if(currentStep == "section7") {
				return "section8";
			}
			if(currentStep == "section8") {
				return "section9";
			}
		}

		var backStep = function() {
			if(currentStep == "section3") {
				if(board.type == "Freestyle") {
					return "section2freestyle";
				}else{
					return "section2freeride";
				}
			}
			if(currentStep == "section2freestyle" || currentStep == "section2freeride" ) {
				return "section1";
			}
			if(currentStep == "section4") {
				return "section3";
			}
			if(currentStep == "section5") {
				return "section4";
			}
			if(currentStep == "section7") {
				if(board.type == "Freestyle") {
					return "section6freestyle";
				}else{
					return "section6freeride";
				}
			}
			if(currentStep == "section6freestyle" || currentStep == "section6freeride" ) {
				return "section5";
			}
			if(currentStep == "section8") {
				return "section7";
			}
			if(currentStep == "section9") {
				return "section8";
			}
		}

		var displayStep = function(step) {
			console.log("displaying step", step);
			$('.section').hide();
			$('#'+step).show();

			if(step == "section1") {
				$('#precedent').hide();
			}else{
				$('#precedent').show();
			}
			if(step == "section9") {
				$('#suivant').hide();
			}else{
				$('#suivant').show();
			}
		}

		var getBoard = function(){
			board.type = $('input[name=type]:checked').val();
			if(board.type == "Freestyle"){
				board.taille = $('input[name=taillefreestyle]:checked').val();
			} else {
				board.taille = $('input[name=taillefreeride]:checked').val();
			}

			board.composition = $('input[name=composition]:checked').val();
			board.finition = $('input[name=finition]:checked').val();

			if(board.type == "Freestyle"){
				board.aileron = $('input[name=aileronfreestyle]:checked').val();
			} else {
				board.aileron = $('input[name=aileronfreeride]:checked').val();
			}
			board.housse = $('input[name=housse]:checked').val();
		}

		var recap = function() {
				$('#recapType').text(board.type);
				$('#recapTaille').text(board.taille);
				$('#recapComposition').text(board.composition);
				$('#recapFinition').text(board.finition);
				$("#recapAileron").attr("src", "ailerons/"+board.aileron+".jpeg");
		}

		var setPrice = function() {
			var price = 0;
			if(board.composition == 'carbone'){
				price = 550;
			} else {
				price = 500;
			}

			if(board.housse == 'housseBleu' || board.housse == 'housseRose') {
				price = price + 50;
			}

			var ailerons = {
				"ailerons-kitesurf-legend-g10" : "legend-g10",
				"ailerons-kitesurf-legend-noir-rose" : "legend-noir-rose",
				"ailerons-kitesurf-legend-vert-blanc" : "legend-vert-blanc",
				"ailerons-kitesurf-legend" : "legend",
				"ailerons-wakeboard-kitesurf--mosquito" : "mosquito",
				"ailerons-wakeboard-kitesurf-G10-mosquito" : "G10-mosquito",
				"ailerons-wakeboard-kitesurf-mosquito-noir-rose" : "mosquito-noir-rose",
				"ailerons-wakeboard-kitesurf-mosquito-vert-blanc" : "mosquito-vert-blanc"
			}

			$("#paypalAmount").val(price.toFixed(2));
			$("#paypalObjectName").val("Board Custom-" + board.couleur1 + "-" + board.couleur2 + "-" + board.type + "-" + board.taille + "-" + board.composition + "-" + board.finition + "/" + ailerons[board.aileron] + "/" + board.housse);
		}

		$('#precedent').on("click", function(){
			console.log("currentStep", currentStep);
			currentStep = backStep();
			console.log("backStep", currentStep);

			displayStep(currentStep);
		});
		$('#suivant').on("click", function(){
			getBoard();
			console.log("currentStep", currentStep);
			currentStep = nextStep();
			console.log("nextStep", currentStep);
			displayStep(currentStep);
			if(currentStep == "section7"){
				recap();
			}else if(currentStep == "section9"){
				setPrice();
			}
			console.log(board);
		});

		var displaySvg = function(type, composition) {
			$('.board-svg').hide();
			if(type == "Freestyle") {
				if(composition == "Carbone") {
					$('#freestyle-carbon-dessous').show();
					$('#freestyle-carbon-dessus').show();
				} else {
					$('#freestyle-bois-dessous').show();
					$('#freestyle-bois-dessus').show();
				}
			} else { // Freeride
				if(composition == "Carbone") {
					$('#freeride-carbon-dessous').show();
					$('#freeride-carbon-dessus').show();
				} else {
					$('#freeride-bois-dessous').show();
					$('#freeride-bois-dessus').show();
				}
			}
		}

		$('input[name=type]').on('change', function(){
			var type = $('input[name=type]:checked').val();
			displaySvg(type, board.composition);
		});

		$('input[name=composition]').on('change', function(){
			var composition = $('input[name=composition]:checked').val();
			displaySvg(board.type, composition);
		});

		$('input[name=livraison]').on('change', function(){
			var livraison = $('input[name=livraison]:checked').val();
			if(livraison == 'france') {
				$('#paypalLivraison').val('0.00');
			}else if (livraison == 'europe') {
				$('#paypalLivraison').val('50.00');
			}else{ //monde
				$('#paypalLivraison').val('100.00');
			}
		});

		var init = function(){
			displayStep(currentStep);
			displaySvg("Freestyle", "Fibre de verre");
		}; init();

	</script>
</body>
</html>
